(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();const y="/assets/audio1-dZkTIK2a.mp3";function p(){const t=document.getElementById("canvas"),s=t.getContext("2d");let n=new Audio,o,e,i,a=0;t.width=1440,t.height=815,n.src=y,g().then(c=>{e=c,e.forEach(l=>{let r=document.createElement("p");r.classList.add("audio-lines"),r.innerHTML=l.part,document.getElementById("audio-text").append(r)})}),h(n),document.getElementById("audio-svg").addEventListener("click",()=>{const c=new AudioContext;n.paused?n.play():n.pause(),h(n),E(n,e),L(n,e),a===0&&(i=c.createMediaElementSource(n),o=c.createAnalyser(),i.connect(o),o.connect(c.destination),o.fftSize=256,a=1);const l=o.frequencyBinCount,r=new Uint8Array(l),m=t.width/l;let u;function f(){s.clearRect(0,0,t.width,t.height),o.getByteFrequencyData(r);for(let d=0;d<l;d++)u=r[d]*2,s.fillStyle="white",s.fillRect(d*m*10,(t.height-u)/.6,m*60,u,"white");requestAnimationFrame(f)}f()})}p();async function g(){let t;return t=(await axios.get("https://audio-visualizer-three.vercel.app/get")).data,t}function h(t){t.paused?document.getElementById("audio-text").classList.remove("show"):document.getElementById("audio-text").classList.add("show")}function E(t,s){t.addEventListener("timeupdate",()=>{let n=t.currentTime*1e3;s.forEach((o,e)=>{n>=o.start&&n<=o.end?(document.getElementsByClassName("audio-lines")[e].classList.add("selected-state"),document.getElementsByClassName("audio-lines")[e].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})):document.getElementsByClassName("audio-lines")[e].classList.remove("selected-state")})})}function L(t,s){for(let n=0;n<document.getElementsByClassName("audio-lines").length;n++)document.getElementsByClassName("audio-lines")[n].addEventListener("click",()=>{t.currentTime=s[n].start/1e3,t.play()})}
